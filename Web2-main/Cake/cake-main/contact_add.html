<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Cake Template">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liên Hệ</title>

    <!-- Google Font & CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/elegant-icons.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />
    <link rel="stylesheet" href="css/nice-select.css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/slicknav.min.css" />
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
    <!-- Header sẽ được tải vào đây -->
    <div id="header-placeholder"></div>
    
    <!-- Breadcrumb Begin -->
    <div class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-6">
                    <div class="breadcrumb__text">
                        <h2>Liên Hệ</h2>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6">
                    <div class="breadcrumb__links">
                        <a href="./index.html">Trang chủ</a>
                        <span>Liên Hệ</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Breadcrumb End -->

    <!-- Contact Section Begin -->
    <section class="contact spad">
        <div class="container">
            <div class="map">
                <div class="container">
                    <div class="row d-flex justify-content-center">
                        <div class="col-lg-4 col-md-7">
                            <div class="map__inner">
                                <h6>Cake Shop</h6>
                                <ul>
                                    <li>273 An Dương Vương, Quận 5, TP HCM</li>
                                    <li>Sweetcake@support.com</li>
                                    <li>0901641800</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="map__iframe">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.631882218431!2d106.68026361529686!3d10.762943192330752!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752f1b888ab297%3A0x2a1824151d383556!2zMjczIEFuIETGsMahbmcgVsawxqFuZywgUGjGsOG7nW5nIDMsIFF14bqtbiA1LCBUaMOgbmggcGjhu5EgSOG7kyBDaMOtIE1pbmgsIFZp4buHdG5hbQ!5e0!3m2!1svi!2s!4v1663482811425!5m2!1svi!2s" height="300" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                </div>
            </div>
            <div class="contact__address">
                <div class="row">
                    <div class="col-lg-4 col-md-6 col-sm-6"><div class="contact__address__item"><h6>TP HCM</h6><ul><li><span class="icon_pin_alt"></span><p>463 Nguyễn Trãi, TP Nha Trang</p></li><li><span class="icon_headphones"></span><p>0901641800</p></li><li><span class="icon_mail_alt"></span><p>Sweetcake@support.com</p></li></ul></div></div>
                    <div class="col-lg-4 col-md-6 col-sm-6"><div class="contact__address__item"><h6>TP Vũng Tàu</h6><ul><li><span class="icon_pin_alt"></span><p>182 Trần Hưng Đạo, TP Vũng Tàu</p></li><li><span class="icon_headphones"></span><p>0901641800</p></li><li><span class="icon_mail_alt"></span><p>Sweetcake@support.com</p></li></ul></div></div>
                    <div class="col-lg-4 col-md-6 col-sm-6"><div class="contact__address__item"><h6>TP Đà Lạt</h6><ul><li><span class="icon_pin_alt"></span><p>96 Nguyễn Văn Trỗi, TP Đà Lạt</p></li><li><span class="icon_headphones"></span><p>0901641800</p></li><li><span class="icon_mail_alt"></span><p>Sweetcake@support.com</p></li></ul></div></div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4">
                    <div class="contact__text">
                        <h3>Liên hệ với chúng tôi</h3>
                        <ul>
                            <li>Đại diện hoặc tư vấn viên có sẵn:</li>
                            <li>T2 - T6: 5:00 sáng đến 9:00 tối</li>
                            <li>T7 - CN: 6:00 sáng đến 9:00 tối</li>
                        </ul>
                        <img src="img/cake-piece.png" alt="Cake Piece">
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="contact__form">
                        <form id="contact-form">
                            <div class="row">
                                <div class="col-lg-6">
                                    <input type="text" id="contact-name" placeholder="Tên của bạn" required>
                                </div>
                                <div class="col-lg-6">
                                    <input type="email" id="contact-email" placeholder="Email của bạn" required>
                                </div>
                                <div class="col-lg-12">
                                    <textarea id="contact-message" placeholder="Nội dung tin nhắn" required></textarea>
                                    <button type="submit" class="site-btn">GỬI PHẢN HỒI</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Contact Section End -->

    <!-- Footer sẽ được include giống index -->
    <div id="footer-placeholder"></div>

    <!-- JS: jQuery trước plugin (giống index) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-3.3.1.min.js"><\/script>')</script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/jquery.nicescroll.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.barfiller.js"></script>
    <script src="js/main.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/auth.js"></script>

    <script>
      // Include partials + áp dụng nền set-bg
      function applySetBg() {
        if (!window.jQuery) return;
        $(".set-bg").each(function () {
          const bg = $(this).data("setbg");
          if (bg) $(this).css("background-image", "url(" + bg + ")");
        });
      }
      function include(partId, file, cb) {
        fetch(file)
          .then(r => r.ok ? r.text() : Promise.reject(file))
          .then(html => {
            const el = document.getElementById(partId);
            if (el) el.innerHTML = html;
            applySetBg();
            cb && cb();
          })
          .catch(err => console.error("Include lỗi:", err));
      }

      // Cập nhật header theo đăng nhập + giỏ
      function updateHeader() {
        const cart = (window.Cart && Cart.getCart()) || [];
        const countEl = document.getElementById('header-cart-count');
        const offCount = document.getElementById('offcanvas-cart-count');
        if (countEl) countEl.textContent = cart.length;
        if (offCount) offCount.textContent = cart.length;

        const user = JSON.parse(localStorage.getItem('user') || 'null');
        const inEl = document.getElementById('header-user-loggedin');
        const outEl = document.getElementById('header-user-loggedout');
        const nameEl = document.getElementById('header-fullname-placeholder');
        if (user) {
          if (inEl) inEl.style.display = 'block';
          if (outEl) outEl.style.display = 'none';
          if (nameEl) nameEl.textContent = user.fullname;
        } else {
          if (inEl) inEl.style.display = 'none';
          if (outEl) outEl.style.display = 'block';
        }
      }

      // Đăng xuất trong header
      function bindLogout() {
        document.body.addEventListener('click', (e) => {
          const btn = e.target.closest('[data-logout]');
          if (btn) { e.preventDefault(); if (window.Auth) Auth.logout(); }
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        // Include HEADER (bị thiếu trước đó) và FOOTER
        include("header-placeholder", "inc/header.html", () => {
          updateHeader();
          bindLogout();
        });
        include("footer-placeholder", "inc/footer.html");

        // Lắng nghe thay đổi để header luôn đồng bộ
        window.addEventListener('cartUpdated', updateHeader);
        window.addEventListener('authChanged', updateHeader);
      });
    </script>
</body>
</html>
